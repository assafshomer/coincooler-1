<script type="text/javascript" charset="utf-8">
  $( document ).ready(function() {
    $(function () {
        // Initialize the jQuery File Upload widget:
        $('#fileupload').fileupload();
        // 
        // Load existing files:
        $.getJSON($('#fileupload').prop('action'), function (files) {
          var fu = $('#fileupload').data('blueimpFileupload'), 
            template;
          fu._adjustMaxNumberOfFiles(-files.length);
          console.log(files);
          template = fu._renderDownload(files)
            .appendTo($('#fileupload .files'));
          // Force reflow:
          fu._reflow = fu._transition && template.length &&
            template[0].offsetWidth;
          template.addClass('in');
          $('#loading').remove();
        });

    });
  });
  $( document ).ready(function() {
    $('#fileupload').fileupload();
    if (navigator.appVersion.match(/Midori/)) {        
        setAutoUpload();
        setMaxNumFiles(1);      
        setFakeObserverOnRp('table#uplist');
      } else {
        setAutoUpload();
        setMaxNumFiles(1);      
        setObserver('table#uplist');
    }
  });  
</script>